<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="/assets/ads.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1523965413574724"
     crossorigin="anonymous"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Handling NULL Values</title>
  <link rel="stylesheet" href="../assets/home.css">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ETGGXC16CY"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-ETGGXC16CY');</script>
</head>
<body>
  <!-- Replacing legacy navbar with unified new-navbar -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <nav class="new-navbar" role="navigation">
    <div class="logo"><a href="../index.html"><img src="../images/coding with tawfiq.jpg" alt="Logo"></a></div>
    <button class="hamburger" aria-label="Toggle menu"><span></span><span></span><span></span></button>
    <ul class="nav-links">
      <li><a href="../index.html">Home</a></li>
      <li><a href="../try-quiz.html">Practice</a></li>
      <li><a href="../findjobs.html">Find Jobs</a></li>
    </ul>
    <div class="nav-actions">
      <button class="search-btn" aria-label="Search"><img src="../images/the search logo.jpg" alt="Search"></button>
      <a class="card-link" href="/public/login.html">Sign In</a>
    </div>
  </nav>
  <script src="/assets/navbar.js"></script>
  <section id="hero" class="home-hero">
    <div class="hero-content">
      <h1><b>Handling NULL Values & Aggregations</b></h1>
      <p style="margin-top:6px;font-weight:600;color:rgba(255,255,255,0.9);max-width:860px">Learn how NULL works, how to test it safely, and level up with GROUP BY, HAVING, ORDER BY, and aggregation functions.</p>
      <div class="hero-actions" style="flex-wrap:wrap;justify-content:center;max-width:900px">
        <a class="btn-primary" href="#null-intro" aria-label="Jump to NULL introduction">NULL Intro</a>
        <a class="btn-ghost" href="#null-testing" aria-label="Jump to testing NULL section">Testing NULL</a>
        <a class="btn-ghost" href="#null-strategies" aria-label="Jump to handling strategies">Handling</a>
        <a class="btn-ghost" href="#aggregations" aria-label="Jump to aggregations">Aggregations</a>
        <a class="btn-ghost" href="#group-by" aria-label="Jump to GROUP BY section">GROUP BY</a>
        <a class="btn-ghost" href="#having" aria-label="Jump to HAVING section">HAVING</a>
        <a class="btn-ghost" href="#challenge" aria-label="Jump to challenge">Challenge</a>
      </div>
      <div style="margin-top:10px;color:rgba(255,255,255,0.85);font-weight:700;font-size:0.9rem">Tap a topic to jump to its card.</div>
    </div>
  </section>
  <main style="max-width:900px;margin:2rem auto; padding:1rem;">
    <!-- Notice triggers multi-ad behavior -->
    <article id="null-intro" class="info-card notice" aria-labelledby="null-intro-title">
      <h3 id="null-intro-title"><b>Understanding NULL Values in Databases</b></h3>
      <p class="muted">A <code>NULL</code> value represents the <em>absence</em> of data — not zero, not an empty string, not a space. It means “no value was provided.” Optional columns, incomplete forms, or deferred data entry commonly produce NULLs.</p>
      <h4>Key Distinction</h4>
      <ul class="card-text">
        <li><b>0</b> is a numeric value.</li>
        <li><b>''</b> (empty string) is a textual value.</li>
        <li><b>NULL</b> means truly <em>unknown / not supplied</em>.</li>
      </ul>
    </article>

    <article id="null-testing" class="info-card" aria-labelledby="null-testing-title" style="margin-top:1rem;">
      <h3 id="null-testing-title"><b>Testing for NULL Values</b></h3>
      <p>You cannot use <code>=</code>, <code>!=</code>, <code>&lt;</code>, etc., with NULL. Use <code>IS NULL</code> or <code>IS NOT NULL</code>.</p>
      <h4>Syntax</h4>
      <pre class="solution-pre" style="white-space: pre-wrap;">-- Rows where email is missing
SELECT id, name, email
FROM Users
WHERE email IS NULL;

-- Rows where email exists
SELECT id, name, email
FROM Users
WHERE email IS NOT NULL;</pre>
      <h4>Why special operators?</h4>
      <p>NULL participates in three‑valued logic (TRUE/FALSE/UNKNOWN). <code>email = NULL</code> yields UNKNOWN, not TRUE, so the row is excluded — hence dedicated operators.</p>
    </article>

    <article id="null-strategies" class="info-card" aria-labelledby="null-strategies-title" style="margin-top:1rem;">
      <h3 id="null-strategies-title"><b>Handling NULL Safely</b></h3>
      <ul class="card-text">
        <li><b>COALESCE(expr, fallback)</b>: first non‑NULL value.</li>
        <li><b>NULLIF(a,b)</b>: returns NULL if a = b (avoid divide by zero).</li>
        <li><b>Set defaults</b>: use sensible DEFAULT constraints for common columns.</li>
        <li><b>Avoid ambiguous meaning</b>: never store empty string when you mean unknown; use NULL.</li>
      </ul>
      <pre class="solution-pre" style="white-space: pre-wrap;">-- Display a fallback label when nickname is NULL
SELECT id, COALESCE(nickname, 'No nickname') AS display_name
FROM Profiles;

-- Prevent division by zero using NULLIF
SELECT total / NULLIF(count_items, 0) AS avg_value
FROM Metrics;</pre>
    </article>

    <article id="aggregations" class="info-card" aria-labelledby="aggregations-title" style="margin-top:1rem;">
      <h3 id="aggregations-title"><b>Aggregation Functions: COUNT, SUM, AVG, MIN, MAX</b></h3>
      <p class="muted">Aggregate functions summarize many rows into a single result. They ignore NULL (except COUNT(*)) to keep stats accurate.</p>
      <pre class="solution-pre" style="white-space: pre-wrap;">-- Basic aggregates
SELECT
  COUNT(*)           AS total_rows,
  COUNT(price)       AS priced_rows,     -- skips NULL price
  SUM(price)         AS total_revenue,
  AVG(price)         AS avg_price,
  MIN(price)         AS cheapest,
  MAX(price)         AS most_expensive
FROM Products;</pre>
      <p class="muted">NULL prices are excluded from <code>COUNT(price)</code>, <code>SUM</code>, <code>AVG</code>, etc. Use <code>COALESCE(price,0)</code> to treat missing values as zero if business rules allow.</p>
    </article>

    <article id="group-by" class="info-card" aria-labelledby="group-by-title" style="margin-top:1rem;">
      <h3 id="group-by-title"><b>GROUP BY: Forming Squads</b></h3>
      <p>Use <code>GROUP BY</code> to aggregate per category.</p>
      <pre class="solution-pre" style="white-space: pre-wrap;">-- Total revenue per category
SELECT category, SUM(price) AS revenue
FROM Products
GROUP BY category;

-- Average price per (category, brand)
SELECT category, brand, AVG(price) AS avg_price
FROM Products
GROUP BY category, brand;</pre>
      <p class="muted">Every non-aggregated column in the SELECT list must appear in the GROUP BY list.</p>
    </article>

    <article id="having" class="info-card" aria-labelledby="having-title" style="margin-top:1rem;">
      <h3 id="having-title"><b>HAVING: Filtering Groups</b></h3>
      <p><code>HAVING</code> filters aggregated results after grouping (like WHERE for groups).</p>
      <pre class="solution-pre" style="white-space: pre-wrap;">-- Only categories with revenue over 1000
SELECT category, SUM(price) AS revenue
FROM Products
GROUP BY category
HAVING SUM(price) > 1000
ORDER BY revenue DESC;

-- Categories averaging price over 50
SELECT category, AVG(price) AS avg_price
FROM Products
GROUP BY category
HAVING AVG(price) > 50;</pre>
      <p class="muted">Avoid HAVING for row-level filters; apply those in WHERE first (e.g., <code>WHERE active = 1</code>).</p>
    </article>

    <article id="challenge" class="info-card" aria-labelledby="challenge-title" style="margin-top:1rem;">
      <h3 id="challenge-title"><b>Challenge: NULLs + Aggregations</b></h3>
      <p>Given a table <code>Orders(order_id, customer_id, total_amount, discount, status)</code> where <code>discount</code> may be NULL:</p>
      <ol class="card-text">
        <li>Calculate total revenue treating NULL discount as 0.</li>
        <li>Show average discount per status (grouping by status).</li>
        <li>List statuses with at least 50 orders and average total_amount &gt; 120.</li>
      </ol>
      <pre class="solution-pre" style="white-space: pre-wrap;">-- 1) Revenue with discount fallback
SELECT SUM(total_amount - COALESCE(discount,0)) AS net_revenue
FROM Orders;

-- 2) Average discount per status
SELECT status, AVG(COALESCE(discount,0)) AS avg_discount
FROM Orders
GROUP BY status;

-- 3) High-performing statuses
SELECT status,
       COUNT(*) AS order_count,
       AVG(total_amount) AS avg_total
FROM Orders
GROUP BY status
HAVING COUNT(*) >= 50 AND AVG(total_amount) > 120
ORDER BY avg_total DESC;
</pre>
      <p class="muted">Stretch: Exclude cancelled orders in step 3 (<code>WHERE status != 'cancelled'</code>) before grouping.</p>
    </article>

    <article class="info-card" aria-labelledby="resources-title" style="margin-top:1rem;">
      <h3 id="resources-title"><b>More Resources</b></h3>
      <ul class="card-text">
        <li><a href="https://www.w3schools.com/sql/sql_isnull.asp" target="_blank" rel="noopener">Handling NULL</a></li>
        <li><a href="https://www.w3schools.com/sql/sql_groupby.asp" target="_blank" rel="noopener">GROUP BY</a></li>
        <li><a href="https://www.w3schools.com/sql/sql_having.asp" target="_blank" rel="noopener">HAVING</a></li>
        <li><a href="https://www.w3schools.com/sql/sql_min_max.asp" target="_blank" rel="noopener">Aggregates</a></li>
      </ul>
      <p style="margin-top:0.5rem;"><a href="../databasehome.html">← Back to Database Home</a></p>
    </article>
  </main>
  
<!-- Non-intrusive display ad -->
<div class="ad-slot ad-center ad-between">
  </div>

<footer id="footer"><p>© 2025 Coding with Tawfiq. All rights reserved.</p></footer>
  <script src="../assets/nav.js"></script>
  <script defer src="/assets/ads.js"></script>
</body>
</html>
