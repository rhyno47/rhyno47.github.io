<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="/assets/ads.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1523965413574724"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beginner Web Dev Quiz - Try Live!</title>
  <link rel="stylesheet" href="assets/home.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <!-- quiz visuals pulled from assets/home.css (.quiz-card, .quiz-grid, etc.) -->
</head>
  <body class="quiz-bg">
  <!-- site-native navbar (uses .new-navbar from assets/home.css) -->
  <nav class="new-navbar" role="navigation">
  <div class="logo"><a href="index.html"><img src="images/coding with tawfiq.jpg" alt="Logo"></a></div>
    <button class="hamburger" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
  <li><a href="try-quiz.html">Practice</a></li>
  <li><a href="findjobs.html">Find Jobs</a></li>
    </ul>
    <div class="nav-actions">
      <button class="search-btn" aria-label="Search"><img src="images/the search logo.jpg" alt="Search"></button>
      <a class="card-link" href="/public/login.html">Sign In</a>
    </div>
  </nav>

  <script src="/assets/navbar.js"></script>

  <!-- ====== HERO SECTION (copied from index.html) ====== -->
  <section id="hero" class="home-hero">
    <div class="hero-content">
      <h1>Test yourself with unlimited practice quizzes</h1>
      <p>Quick, hands-on challenges with instant feedback. Edit the solution, run the live preview, and iterate until you master each concept â€” no fluff, just focused practice.</p>
      <div class="hero-actions">
        <a class="btn-primary" href="try-quiz.html">Start a quiz</a>
        <a class="btn-ghost" href="webdevhome.html">Browse courses</a>
      </div>
      <div style="margin-top:10px;color:rgba(255,255,255,0.88);font-weight:700;font-size:0.95rem">Jump straight in â€” no signup required</div>
    </div>
  </section>

  <main class="page">
    <div class="quiz-panel">
  <h1 class="quiz-hero-title">ðŸ§  Test your skills with unlimited quizzes â€” build, learn, repeat ðŸš€âœ¨</h1>
      <div id="quiz" class="quiz-grid"></div>
  </div>
  </main>
  <script>
    // Quiz questions array (with example solutions)
  const questions = [
      {
        type: 'html',
        question: '1. Write HTML to display a heading with the text "Hello World".',
        starter: '<!-- Your code here -->',
        solution: '<h1>Hello World</h1>',
        test: code => /<h1>\s*Hello World\s*<\/h1>/i.test(code),
        live: true
      },
      {
        type: 'css',
        question: '2. Write CSS to make all paragraphs red.',
        starter: 'p {\n  /* your code */\n}',
        solution: 'p { color: red; }',
        test: code => /color\s*:\s*red/i.test(code),
        live: true,
        html: '<p>Test me!</p>'
      },
      {
        type: 'js',
        question: '3. Create a button that toggles a dark-mode class on the page when clicked (simple theme toggle).',
        starter: 'function toggleDark() {\n  // toggle dark mode on document.body\n}',
        solution: 'function toggleDark() { document.body.classList.toggle("dark-mode"); }',
        test: code => /classList\.toggle\s*\(\s*['"]dark-mode['"]\s*\)/.test(code),
        live: true,
        html: '<button onclick="toggleDark()">Toggle Theme</button>'
      },
      {
        type: 'html',
        question: '4. Create an HTML input of type email.',
        starter: '<!-- Your code here -->',
        solution: '<input type="email" />',
        test: code => /<input[^>]*type\s*=\s*["']email["'][^>]*>/i.test(code),
        live: true
      },
      {
        type: 'css',
        question: '5. Write CSS to center a div horizontally.',
        starter: '.center-div {\n  /* your code */\n}',
        solution: '.center-div { margin: 0 auto; }',
        test: code => /margin\s*:\s*0\s*auto/i.test(code),
        live: true,
        html: '<div class="center-div" style="width:100px;background:#eee;">Center me</div>'
      },
      {
        type: 'js',
        question: '6. Write JavaScript to change the text of a paragraph with id="demo" to "Done!".',
        starter: 'function changeText() {\n  // your code\n}',
        solution: 'function changeText() { document.getElementById("demo").innerText = "Done!"; }',
        test: code => /getElementById\(['"]demo['"]\).*\.inner(Text|HTML|Content)\s*=\s*['"]Done!['"]/.test(code),
        live: true,
        html: '<p id="demo">Not done</p><button onclick="changeText()">Change</button>'
      },
      {
        type: 'python',
        question: '7. Write Python code to print "Hello Python".',
        starter: '# your code here',
        solution: 'print("Hello Python")',
        test: code => /print\s*\(\s*['"]Hello Python['"]\s*\)/.test(code),
        live: false
      },
      {
        type: 'html',
        question: '8. Write HTML to create a link to https://www.example.com with text "Visit".',
        starter: '<!-- Your code here -->',
        solution: '<a href="https://www.example.com">Visit</a>',
        test: code => /<a[^>]*href\s*=\s*["']https:\/\/www\.example\.com["'][^>]*>\s*Visit\s*<\/a>/i.test(code),
        live: true
      },
      {
        type: 'js',
        question: '9. Write JavaScript to log "Success" to the console.',
        starter: '// your code here',
        solution: 'console.log("Success")',
        test: code => /console\.log\s*\(\s*['"]Success['"]\s*\)/.test(code),
        live: true
      },
      {
        type: 'mern',
        question: '10. In MERN, what does the "N" stand for?',
        starter: '',
        solution: 'Node (Node.js)',
        test: code => /node\s*js?/i.test(code),
        live: false
      }
  ];

    // track attempts per question
    const attempts = Array(questions.length).fill(0);

    function createQuiz() {
      const quizDiv = document.getElementById('quiz');
      quizDiv.innerHTML = '';
      questions.forEach((q, i) => {
        const qDiv = document.createElement('section');
        qDiv.className = 'quiz-card';
        // Render question text without any leading numeric prefix (e.g. "1. ")
        const starterEsc = escapeHtml(q.starter || '');
        const questionText = (q.question || '').replace(/^\s*\d+\.\s*/, '');
        const safeQuestion = escapeHtml(questionText);
        qDiv.innerHTML = `
          <div class="quiz-card-header">
            <div class="quiz-number">${i+1}</div>
            <div class="quiz-question">${safeQuestion}</div>
          </div>
          <div class="quiz-card-body">
            <textarea class="question-code" id="code${i}" placeholder="${starterEsc}">${starterEsc}</textarea>
            <div class="quiz-actions">
              <button class="btn btn-primary" onclick="checkAnswer(${i})">Try</button>
              <div style="margin-left:auto;font-weight:700" id="result${i}"></div>
            </div>
            ${q.live && (q.type === 'html' || q.type === 'css' || q.type === 'js') ? `<div class="iframe-preview" id="preview${i}"></div>` : ''}
          </div>
        `;
        quizDiv.appendChild(qDiv);
      });
    }

    window.checkAnswer = function(idx) {
      const q = questions[idx];
      const code = document.getElementById('code'+idx).value;
      const res = document.getElementById('result'+idx);
      if (q.test(code)) {
        // correct: show confirmation and then print the authoritative solution in editor + terminal and run preview
        res.innerHTML = '<span class="correct">Correct! âœ…</span>';
        res.className = 'result';
        attempts[idx] = 0;
        // print solution into editor and terminal and render preview if applicable
        try {
          const blockId = 'solBlock' + idx;
          document.getElementById('code'+idx).value = q.solution || document.getElementById('code'+idx).value;
          res.innerHTML = `<span class="correct">Correct! âœ… â€” Printing answer on terminal.</span><div id="${blockId}" style="margin-top:8px"><pre class="solution-pre">${escapeHtml(q.solution)}</pre></div>`;
          if (q.live && (q.type === 'html' || q.type === 'css' || q.type === 'js')){
            const preview = document.getElementById('preview' + idx);
            if (preview){
              let srcdoc = '';
              if (q.type === 'html') srcdoc = q.solution;
              else if (q.type === 'css') srcdoc = `<style>${q.solution}</style>${q.html||''}`;
              else if (q.type === 'js') srcdoc = `${q.html||''}<script>${q.solution}<'+'/script>`;
              preview.innerHTML = `<iframe style="width:100%;height:120px;border:none;" srcdoc="${srcdoc.replace(/"/g,'&quot;')}"></iframe>`;
            }
          }
        } catch(e){ console.error('Print-on-correct error', e); }
      } else {
        attempts[idx]++;
        if (attempts[idx] === 1) {
          // first failed try â€” concise encouragement for mobile friendliness
          res.innerHTML = '<span class="inspire-message">Nice attempt â€” keep going! One more try.</span>';
          res.className = 'result incorrect';
        } else if (attempts[idx] === 2) {
          // second failed try â€” brief nudge before revealing solution
          res.innerHTML = '<span class="inspire-message">Almost there â€” one more try to reveal the answer.</span>';
          res.className = 'result incorrect';
        } else if (attempts[idx] >= 3 && q.solution) {
          // third failed try â€” auto-print the solution in the terminal area and run live preview if applicable
          const blockId = 'solBlock' + idx;
          res.innerHTML = `<span class="incorrect">Printing answer on terminal â€” showing result.</span><div id="${blockId}" style="margin-top:8px"><pre class="solution-pre">${escapeHtml(q.solution)}</pre></div>`;
          // also insert solution into the editor so user can edit/copy
          try{ document.getElementById('code'+idx).value = q.solution; }catch(e){}
          res.className = 'result';
          // If this question supports live preview, render the solution directly into the preview iframe
          try {
            if (q.live && (q.type === 'html' || q.type === 'css' || q.type === 'js')) {
              const preview = document.getElementById('preview' + idx);
              if (preview) {
                let srcdoc = '';
                if (q.type === 'html') srcdoc = q.solution;
                else if (q.type === 'css') srcdoc = `<style>${q.solution}</style>${q.html||''}`;
                else if (q.type === 'js') srcdoc = `${q.html||''}<script>${q.solution}<\/script>`;
                preview.innerHTML = `<iframe style="width:100%;height:120px;border:none;" srcdoc="${srcdoc.replace(/"/g,'&quot;')}"></iframe>`;
              }
            }
          } catch(e) { console.error('Live preview render error', e); }
        }
      }
    };

    function escapeHtml(str){
      return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    }

    window.runLive = function(idx) {
      const q = questions[idx];
      const code = document.getElementById('code'+idx).value;
      const preview = document.getElementById('preview'+idx);
      let srcdoc = '';
      if (q.type === 'html') {
        srcdoc = code;
      } else if (q.type === 'css') {
        srcdoc = `<style>${code}</style>${q.html||''}`;
      } else if (q.type === 'js') {
        srcdoc = `${q.html||''}<script>${code}<\/script>`;
      }
      preview.innerHTML = `<iframe style="width:100%;height:120px;border:none;" srcdoc="${srcdoc.replace(/"/g,'&quot;')}"></iframe>`;
    };

    // submit and demo controls removed â€” quiz cards operate independently

    createQuiz();
  </script>

    <!-- AI widget is injected globally by /assets/navbar.js -->

<!-- Non-intrusive display ad -->
<div class="ad-slot ad-center ad-between">
  </div>

  <script defer src="/assets/ads.js"></script>
</body>
</html>
